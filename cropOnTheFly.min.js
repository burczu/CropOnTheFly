/*!
 * Crop Images On The Fly
 *
 * Copyright (c) 2014 Bart≈Çomiej Dybowski
 * Dual licensed under the MIT and GPL licenses.
 * Uses the same license as jQuery, see:
 * http://docs.jquery.com/License
 *
 * @version 1.1.1
 */
(function(f){function b(h){f(h).wrap(function(){var i=f(this).parent(".cropContainer");if(i.length===0){return'<div class="cropContainer"></div>'}return false});return f(h).parent(".cropContainer")}function e(k,j,i){var h;switch(i){case"center":h=-1*((k-j)/2);break;case"bottom":case"right":h=-1*(k-j);break;case"top":case"left":h=0;break;default:if(f.isNumeric(i)==true){h=i*-1}else{h=0}break}return h}function d(j,i){var h=i;if(h===null){h=j}if(j<h){h=j}return h}function g(j,i){var h=new Image();h.onload=function(){f(h).show()};if(j.showLoader===true){f(h).hide();if(j.loaderCss!==null){f(h).css(j.loaderCss)}h.src=j.loaderSrc;f(h).attr("class","loader");f(i).after(h)}}function c(j,k){var i={},m=f(j).attr("data-src"),h=f(j).attr("class"),l=new Image();f(j).css("visibility","hidden");i.parent=b(j);g(k,j);l.onload=function(){j.src=l.src;i.height=d(j.height,k.height);i.width=d(j.width,k.width);i.top=e(j.height,i.height,k.verticalPosition);i.left=e(j.width,i.width,k.horizontalPosition);i.element=j;f(i.parent).css("overflow","hidden").css("height",i.height+"px").css("width",i.width+"px");f(j).css("position","relative").css("margin","0px").css("top",i.top+"px").css("left",i.left+"px");i.parent.find("img:first-child").attr("class",h).attr("data-src",m).show();f(j).css("visibility","visible");f(".loader").remove();k.afterCrop(i)};l.src=m}function a(h){var i=new Image();i.src=h}f.fn.cropOnTheFly=function(h){var i=f.extend({},f.fn.cropOnTheFly.settings,h);if(i.showLoader){a(i.loaderSrc)}return this.each(function(){var j=this;f(window).on("load resize",function(){c(j,i)})})};f.fn.cropOnTheFly.settings={height:null,width:null,verticalPosition:"top",horizontalPosition:"left",showLoader:true,loaderSrc:"loader.gif",loaderCss:{},afterCrop:function(h){}}}(jQuery));