/*!
 * Crop Images On The Fly
 *
 * Copyright (c) 2014 Bart≈Çomiej Dybowski
 * Dual licensed under the MIT and GPL licenses.
 * Uses the same license as jQuery, see:
 * http://docs.jquery.com/License
 *
 * @version 1.1.0
 */
(function(e){function a(g){e(g).wrap(function(){var h=e(this).parent(".cropContainer");if(h.length===0){return'<div class="cropContainer"></div>'}return false});return e(g).parent(".cropContainer")}function d(j,i,h){var g;switch(h){case"center":g=-1*((j-i)/2);break;case"bottom":case"right":g=-1*(j-i);break;case"top":case"left":g=0;break;default:if(e.isNumeric(h)==true){g=h*-1}else{g=0}break}return g}function c(i,h){var g=h;if(g===null){g=i}if(i<g){g=i}return g}function f(i,h){var g=new Image();g.onload=function(){e(g).show()};if(i.showLoader===true){e(g).hide();if(i.loaderCss!==null){e(g).css(i.loaderCss)}g.src=i.loaderSrc;e(g).attr("class","loader");e(h).after(g)}}function b(i,j){var h={},l=e(i).attr("data-src"),g=e(i).attr("class"),k=new Image();e(i).css("visibility","hidden");h.parent=a(i);f(j,i);k.onload=function(){i.src=k.src;h.height=c(i.height,j.height);h.width=c(i.width,j.width);h.top=d(i.height,h.height,j.verticalPosition);h.left=d(i.width,h.width,j.horizontalPosition);h.element=i;e(h.parent).css("overflow","hidden").css("height",h.height+"px").css("width",h.width+"px");e(i).css("position","relative").css("margin","0px").css("top",h.top+"px").css("left",h.left+"px");h.parent.find("img:first-child").attr("class",g).attr("data-src",l).show();e(i).css("visibility","visible");e(".loader").remove();j.afterCrop(h)};k.src=l}e.fn.cropOnTheFly=function(g){var h=e.extend({},e.fn.cropOnTheFly.settings,g);return this.each(function(){var i=this;e(window).on("load resize",function(){b(i,h)})})};e.fn.cropOnTheFly.settings={height:null,width:null,verticalPosition:"top",horizontalPosition:"left",showLoader:true,loaderSrc:"loader.gif",loaderCss:{},afterCrop:function(g){}}}(jQuery));