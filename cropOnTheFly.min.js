/*!
 * Crop Images On The Fly
 *
 * Copyright (c) 2014 Bart≈Çomiej Dybowski
 * Dual licensed under the MIT and GPL licenses.
 * Uses the same license as jQuery, see:
 * http://docs.jquery.com/License
 *
 * @version 1.1.0
 */
(function(e){function a(g){e(g).wrap(function(){var h=e(this).parent(".cropContainer");if(h.length===0){return'<div class="cropContainer"></div>'}return false});return e(g).parent(".cropContainer")}function d(j,i,h){var g;switch(h){case"center":g=-1*((j-i)/2);break;case"bottom":case"right":g=-1*(j-i);break;case"top":case"left":g=0;break;default:if(e.isNumeric(h)==true){g=h*-1}else{g=0}break}return g}function c(i,h){var g=h;if(g===null){g=i}if(i<g){g=i}return g}function f(h,g){if(h.showLoader===true){if(h.loaderCss!==null){e(g).css(h.loaderCss)}e(g).attr("src",h.loaderSrc)}else{e(g).hide()}}function b(h,i){var g={},k=e(h).attr("data-src"),j=new Image();g.parent=a(h);f(i,h);j.onload=function(){g.height=c(j.height,i.height);g.width=c(j.width,i.width);g.top=d(j.height,g.height,i.verticalPosition);g.left=d(j.width,g.width,i.horizontalPosition);g.element=h;e(h).attr("src",k).show();e(g.parent).css("overflow","hidden").css("height",g.height+"px").css("width",g.width+"px");e(h).css("position","relative").css("margin","0px").css("top",g.top+"px").css("left",g.left+"px");i.afterCrop(g)};j.src=k}e.fn.cropOnTheFly=function(g){var h=e.extend({},e.fn.cropOnTheFly.settings,g);return this.each(function(){var i=this;e(window).on("load resize",function(){b(i,h)})})};e.fn.cropOnTheFly.settings={height:null,width:null,verticalPosition:"top",horizontalPosition:"left",showLoader:true,loaderSrc:"loader.gif",loaderCss:{},afterCrop:function(g){}}}(jQuery));